#!/usr/bin/env python

from time import sleep
from ax12 import Ax12
import sys

servo = Ax12()

legs = [[1,2,3], [13,14,15], [7,8,9], [10, 11, 12], [4, 5, 6], [16, 17, 18]]
positions = [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]

def move(leg, pos1, pos2, pos3, time):
    maxspeed = 531
    dist = [abs(positions[leg][0] - pos1), abs(positions[leg][1] - pos2), abs(positions[leg][2] - pos3)]
    speed1 = int(dist[0] / time)
    speed2 = int(dist[1] / time)
    speed3 = int(dist[2] / time)
    if(speed1 == 0):
        speed1 = 1
    if(speed2 == 0):
        speed2 = 1
    if(speed3 == 0):
        speed3 = 1

    servo.moveSpeedRW(legs[leg][0], pos1, speed1)
    servo.moveSpeedRW(legs[leg][1], pos2, speed2)
    servo.moveSpeedRW(legs[leg][2], pos3, speed3)

    positions[leg][0] = pos1
    positions[leg][1] = pos2
    positions[leg][2] = pos3

def idle():
    for x in range (0, 6):
        move(x, 512, 819, 810, 4)
        servo.action()
        sleep(0.75);

def stand():
    for x in range (0, 6):
        move(x, 512, 733, 674, 4)
        servo.action()
        sleep(0.5)

def walk():
    moves1 = [[512, 307, 512], [768, 307, 512], [768, 350, 512], [512, 350, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512]]
    moves2 = [[410, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 350, 512], [410, 350, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512]]
    moves3 = [[357, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 350, 512], [357, 350, 512], [357, 307, 512], [357, 307, 512], [357, 307, 512], [357, 307, 512], [357, 307, 512], [357, 307, 512], [357, 307, 512], [357, 307, 512], [357, 307, 512]]
    moves4 = [[512, 307, 512], [768, 307, 512], [768, 307, 512], [768, 307, 512], [768, 307, 512], [768, 307, 512], [768, 307, 512], [768, 307, 512], [768, 307, 512], [768, 307, 512], [768, 307, 512], [768, 350, 512], [512, 350, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512]]
    moves5 = [[410, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 350, 512], [410, 350, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512]]
    moves6 = [[357, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 350, 512], [357, 350, 512]]

    
    leg1 = 0
    leg2 = 0
    leg3 = 0
    leg4 = 0
    leg5 = 0
    leg6 = 0
    speed = 1

    for x in range (0, 19):
        move(0, moves1[leg1][0], moves1[leg1][1], moves1[leg1][2], speed)
        move(1, moves2[leg2][0], moves2[leg2][1], moves2[leg2][2], speed)
        move(2, moves3[leg3][0], moves3[leg3][1], moves3[leg3][2], speed)
        move(3, moves4[leg4][0], moves4[leg4][1], moves4[leg4][2], speed)
        move(4, moves5[leg5][0], moves5[leg5][1], moves5[leg5][2], speed)
        move(5, moves6[leg6][0], moves6[leg6][1], moves6[leg6][2], speed)
        leg1 += 1
        if(leg1 > 18):
            leg1 = 0
        leg2 += 1
        if(leg2 > 18):
            leg2 = 0
        leg3 += 1
        if(leg3 > 18):
            leg3 = 0
        leg4 += 1
        if(leg4 > 18):
            leg4 = 0
        leg5 += 1
        if(leg5 > 18):
            leg5 = 0
        leg6 += 1
        if(leg6 > 18):
            leg6 = 0
        servo.action()
        sleep(1) #0.02 sleep for every 0.1 speed

def turn():
	moves1 = [[768, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 350, 512], [768, 350, 512]]
	moves2 = [[410, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512], [614, 350, 512], [410, 350, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512]]
	moves3 = [[512, 307, 512], [357, 307, 512], [357, 350, 512], [512, 350, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512]]
	moves4 = [[512, 307, 512], [768, 307, 512], [768, 350, 512], [512, 350, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512]]
	moves5 = [[614, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 307, 512], [410, 350, 512], [614, 350, 512], [614, 307, 512], [614, 307, 512], [614, 307, 512]]
	moves6 = [[357, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 307, 512], [512, 350, 512], [357, 350, 512]]
	
	
	
	leg1 = 0
	leg2 = 0
	leg3 = 0
	leg4 = 0
	leg5 = 0
	leg6 = 0
	speed = 1

	for x in range (0, 10):
		move(0, moves1[leg1][0], moves1[leg1][1], moves1[leg1][2], speed)
		move(1, moves2[leg2][0], moves2[leg2][1], moves2[leg2][2], speed)
		move(2, moves3[leg3][0], moves3[leg3][1], moves3[leg3][2], speed)
		move(3, moves4[leg4][0], moves4[leg4][1], moves4[leg4][2], speed)
		move(4, moves5[leg5][0], moves5[leg5][1], moves5[leg5][2], speed)
		move(5, moves6[leg6][0], moves6[leg6][1], moves6[leg6][2], speed)
		leg1 += 1
		if(leg1 > 9):
			leg1 = 0
		leg2 += 1
		if(leg2 > 9):
			leg2 = 0
		leg3 += 1
		if(leg3 > 9):
			leg3 = 0
		leg4 += 1
		if(leg4 > 9):
			leg4 = 0
		leg5 += 1
		if(leg5 > 9):
			leg5 = 0
		leg6 += 1
		if(leg6 > 9):
			leg6 = 0
		servo.action()
		sleep(1) #0.02 sleep for every 0.1 speed
		
def newTurn():
    moves1 = [[410, 307, 512], [614, 307, 512], [512, 400, 512]] #poten 1 3 5
    moves2 = [[610, 307, 512], [410, 307, 512], [512, 400, 512]] #poten 2 4 6

  
    
    leg1 = 0
    leg2 = 2
    leg3 = 1
    leg4 = 1
    leg5 = 2
    leg6 = 0
    speed = 1

    for x in range (0, 6):
        move(0, moves1[leg1][0], moves1[leg1][1], moves1[leg1][2], speed)
        move(1, moves2[leg2][0], moves2[leg2][1], moves2[leg2][2], speed)
        move(2, moves1[leg3][0], moves1[leg3][1], moves1[leg3][2], speed)
        move(3, moves2[leg4][0], moves2[leg4][1], moves2[leg4][2], speed)
        move(4, moves1[leg5][0], moves1[leg5][1], moves1[leg5][2], speed)
        move(5, moves2[leg6][0], moves2[leg6][1], moves2[leg6][2], speed)
        leg1 -= 1
        if(leg1 < 0):
            leg1 = 2
        leg2 -= 1
        if(leg2 < 0):
            leg2 = 2
        leg3 -= 1
        if(leg3 < 0):
            leg3 = 2
        leg4 -= 1
        if(leg4 < 0):
            leg4 = 2
        leg5 -= 1
        if(leg5 < 0):
            leg5 = 2
        leg6 -= 1
        if(leg6 < 0):
            leg6 = 2
        servo.action()
        sleep(0.5) #0.02 sleep for every 0.1 speed


while True:
    newTurn()

